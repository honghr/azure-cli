resources:
- repo: self

trigger: none

jobs:
- job: RdbmsRegression
  displayName: Rdbms Regression

  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - task: UsePythonVersion@0
    displayName: 'Use Python 3.10'
    inputs:
      versionSpec: 3.10
  - template: ../../../../../../.azure-pipelines/templates/azdev_setup.yml
  - bash: |
      set -ev
      . env/bin/activate
      azdev test --live --no-exitfirst test_rdbms_flexible_commands --mark mysql_regression -a --mysql-location=eastus2euap --mysql-paired-location=centraluseuap --mysql-general-purpose-sku=Standard_D2s_v3 --mysql-memory-optimized-sku=Standard_E2s_v3

    displayName: 'azdev test rdbms'